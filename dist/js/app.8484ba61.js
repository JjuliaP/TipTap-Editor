(function(){"use strict";var t={6731:function(t,e,n){var o=n(5130),r=n(6768),i=(n(4603),n(7566),n(8721),n(144)),a=n(4232),l=n(8413),u=n(126),s=n(6642);const c=s.A.extend({addAttributes(){return{...this.parent?.(),fontWeight:{default:null,parseHTML:t=>t.style.fontWeight,renderHTML:t=>t["fontWeight"]?{style:`font-weight: ${t["fontWeight"]}`}:{}}}},addCommands(){return{...this.parent?.(),setFontWeight:t=>({commands:e})=>e.setMark(this.name,{fontWeight:t}),unsetFontWeight:()=>({chain:t})=>t().setMark(this.name,{fontWeight:null}).removeEmptyTextStyle().run()}}}),f={class:"editor"},d={key:0,class:"editor__slider"},p={for:"editor__slider-input",class:"editor__slider-label"},v=(0,r.Lk)("span",{class:"editor__button-label"},"Export Text",-1),h=(0,r.Lk)("span",{class:"editor__button-icon"},"⬇️",-1),m=[v,h],g=40;var _=(0,r.pM)({__name:"TipTapEditor",setup(t){const e=(0,i.KR)(null),n=(0,i.KR)(null),v=(0,i.KR)(!1),h=(0,i.KR)(40),_=(0,i.KR)(null),b=(0,i.KR)(null);(0,r.sV)((()=>{e.value=new l.KE({content:"Hello World",extensions:[s.A,u.A,c],onSelectionUpdate({editor:t}){const{state:e}=t,{from:n,to:o}=t.state.selection,r=e.doc.textBetween(n,o," ");r&&(v.value=!0,k())},onBlur({editor:t,event:e}){const{empty:n}=t.state.selection;n||b.value===e.relatedTarget||(v.value=!1,t.commands.setTextSelection(0))}})}));const k=()=>{if(e.value){const{state:t}=e.value,{from:n,to:o}=t.selection,r=t.doc.textBetween(n,o).trim();if(r){v.value=!0,_.value={from:n,to:o};let e=t.doc.nodeAt(n),r=g;if(e&&e.marks){const t=e.marks.find((t=>"textStyle"===t.type.name&&t.attrs.fontWeight));t&&(r=parseInt(t.attrs.fontWeight)/10)}h.value=r}else v.value=!1,_.value=null}},y=()=>{e.value&&_.value&&e.value.chain().focus().setFontWeight((10*h.value).toString()).run()},x=()=>{if(e.value){const t={};e.value.state.doc.content.toJSON()[0].content.map((e=>{if(console.log(e),e.marks){const n=e.marks.find((t=>"textStyle"===t.type&&t.attrs.fontWeight));n&&(t[e.text.trim()]=(n.attrs.fontWeight/10).toString())}else t[e.text.trim()]=g.toString()})),W(JSON.stringify(t),"json.txt","text/plain")}};function W(t,e,n="text/plain"){var o=document.createElement("a"),r=new Blob([t],{type:n});o.href=URL.createObjectURL(r),o.download=e,o.click(),URL.revokeObjectURL(o.href)}return(t,u)=>((0,r.uX)(),(0,r.CE)("div",f,[(0,r.bF)((0,i.R1)(l.$Z),{editor:e.value,modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=t=>n.value=t),class:"editor__content"},null,8,["editor","modelValue"]),v.value?((0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("label",p,[(0,r.eW)("Font Weight: "),(0,r.Lk)("span",null,(0,a.v_)(h.value),1)]),(0,r.bo)((0,r.Lk)("input",{type:"range",id:"editor__slider-input",class:"editor__slider-input",min:"1",max:"100","onUpdate:modelValue":u[1]||(u[1]=t=>h.value=t),onInput:u[2]||(u[2]=t=>y()),ref_key:"sliderInput",ref:b},null,544),[[o.Jo,h.value]])])):(0,r.Q3)("",!0),(0,r.Lk)("button",{class:"editor__button",onClick:x},m)]))}});const b=_;var k=b,y=(0,r.pM)({__name:"App",setup(t){return(t,e)=>((0,r.uX)(),(0,r.Wv)(k))}});const x=y;var W=x;(0,o.Ef)(W).mount("#app")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,i){if(!o){var a=1/0;for(c=0;c<t.length;c++){o=t[c][0],r=t[c][1],i=t[c][2];for(var l=!0,u=0;u<o.length;u++)(!1&i||a>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[u])}))?o.splice(u--,1):(l=!1,i<a&&(a=i));if(l){t.splice(c--,1);var s=r();void 0!==s&&(e=s)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[o,r,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,i,a=o[0],l=o[1],u=o[2],s=0;if(a.some((function(e){return 0!==t[e]}))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(u)var c=u(n)}for(e&&e(o);s<a.length;s++)i=a[s],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},o=self["webpackChunktiptap_editor"]=self["webpackChunktiptap_editor"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(6731)}));o=n.O(o)})();
//# sourceMappingURL=app.8484ba61.js.map